<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aura by May Roga LLC - Transparencia de Salud</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; background: #f0f2f5; color: #333; text-align: center; }
        .container { max-width: 900px; margin: 40px auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: #0b5cff; font-size: 2.5rem; margin-bottom: 5px; }
        h2 { font-size: 1.1rem; color: #666; margin-top: 0; margin-bottom: 30px; }
        .autopropaganda { font-style: italic; color: #444; height: 30px; margin-bottom: 30px; font-weight: bold; }
        
        .plan-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .plan-card { background: white; border: 2px solid #eee; padding: 25px; border-radius: 15px; width: 250px; transition: 0.3s; }
        .plan-card:hover { border-color: #0b5cff; transform: translateY(-5px); }
        .price { font-size: 28px; font-weight: bold; margin: 15px 0; color: #333; }
        .plan-btn { width: 100%; padding: 12px; border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; font-size: 1rem; }
        
        .donation-section { margin-top: 50px; padding: 30px; border: 2px dashed #0b5cff; border-radius: 15px; background: #f9fbff; }
        .search-section { margin-top: 40px; padding: 30px; background: #eef4ff; border-radius: 15px; }
        input { padding: 12px; margin: 10px; border: 1px solid #ccc; border-radius: 8px; width: 200px; }
        .btn-search { background: #0b5cff; color: white; padding: 12px 25px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h1>Aura</h1>
    <h2>by May Roga LLC</h2>
    <div class="autopropaganda" id="autopropaganda">Cargando transparencia m√©dica...</div>

    <select id="langSelector" style="padding: 10px; border-radius: 5px; margin-bottom: 30px;">
        <option value="es">Espa√±ol</option>
        <option value="en">English</option>
        <option value="ht">Krey√≤l Ayisyen</option>
    </select>

    <div class="plan-container">
        <div class="plan-card">
            <h3>R√°pido</h3>
            <p class="price">$5.99</p>
            <p><strong>7 minutos</strong> de consulta</p>
            <button class="plan-btn" style="background: #6c757d;" onclick="checkout('rapido')">Elegir Plan</button>
        </div>
        <div class="plan-card" style="border-color: #0b5cff;">
            <h3>Standard</h3>
            <p class="price">$9.99</p>
            <p><strong>15 minutos</strong> de consulta</p>
            <button class="plan-btn" style="background: #0b5cff;" onclick="checkout('standard')">Elegir Plan</button>
        </div>
        <div class="plan-card">
            <h3>Special</h3>
            <p class="price">$19.99</p>
            <p><strong>35 min</strong> (D√≠a 1-2) / 6 min (Resto)</p>
            <button class="plan-btn" style="background: #28a745;" onclick="checkout('special')">Elegir Plan</button>
        </div>
    </div>

    <div class="search-section">
        <h3>Consultar Costo Estimado</h3>
        <input type="text" id="zip_code" placeholder="ZIP Code">
        <input type="text" id="code" placeholder="C√≥digo (ej: D1110)">
        <button class="btn-search" onclick="consultar()">Consultar</button>
        <div id="result" style="margin-top: 20px; font-weight: bold; color: #0b5cff;"></div>
    </div>

    <div class="donation-section">
        <h3>Apoya nuestra Misi√≥n Solidaria ü§ù</h3>
        <p style="font-size: 0.9rem; color: #555; margin-bottom: 20px;">
            Tu donaci√≥n apoya al equipo de trabajo y permite comprar **herramientas de trabajo para necesitados**, 
            ayud√°ndoles a prosperar para que ellos sigan la cadena de ayuda.
        </p>
        <input type="number" id="donAmount" placeholder="Monto $" style="width: 100px;">
        <button onclick="donar()" style="background: #ff9800; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold;">Donar con Prop√≥sito</button>
    </div>

    <p style="margin-top: 40px; font-size: 0.75rem; color: #999;">
        ¬© 2026 May Roga LLC. La informaci√≥n proporcionada es anal√≠tica y educativa, basada en datos hist√≥ricos. No constituye consejo m√©dico ni garant√≠a de precios finales.
    </p>
</div>

<script>
    const BASE_URL = "https://aura-iyxa.onrender.com";

    const msgs = {
        es: ["Transparencia de costos m√©dicos üá∫üá∏", "Evita sorpresas en tu factura dental ü¶∑", "Datos oficiales y actualizados üìä"],
        en: ["Healthcare cost transparency üá∫üá∏", "Avoid surprises in dental bills ü¶∑", "Official updated data üìä"],
        ht: ["Transparans nan depans medikal üá∫üá∏", "Evite sipriz nan b√≤dwo dant√® ou ü¶∑", "Done ofisy√®l mete ajou üìä"]
    };

    let currentLang = "es";
    let msgIdx = 0;

    function rotateMsgs() {
        document.getElementById("autopropaganda").innerText = msgs[currentLang][msgIdx];
        msgIdx = (msgIdx + 1) % msgs[currentLang].length;
    }
    setInterval(rotateMsgs, 3000);

    document.getElementById("langSelector").onchange = (e) => { currentLang = e.target.value; rotateMsgs(); };

    async function checkout(plan) {
        const fd = new FormData(); fd.append("plan", plan);
        const resp = await fetch(`${BASE_URL}/create-checkout-session`, { method: "POST", body: fd });
        const data = await resp.json();
        if(data.url) window.location.href = data.url;
    }

    async function consultar() {
        const zip = document.getElementById("zip_code").value;
        const code = document.getElementById("code").value;
        if(!zip || !code) { alert("Completa los datos"); return; }
        
        const fd = new FormData(); fd.append("zip_code", zip); fd.append("code", code); fd.append("plan_type", "standard");
        const resp = await fetch(`${BASE_URL}/estimado`, { method: "POST", body: fd });
        const data = await resp.json();
        document.getElementById("result").innerText = `${data.procedimiento || ""}: ${data.rango_estimado} (${data.minutos_concedidos} min concedidos)`;
    }

    async function donar() {
        const amt = document.getElementById("donAmount").value;
        const fd = new FormData(); fd.append("amount", amt);
        const resp = await fetch(`${BASE_URL}/donacion`, { method: "POST", body: fd });
        const data = await resp.json();
        if(data.url) window.location.href = data.url;
    }
</script>
</body>
</html>
