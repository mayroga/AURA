<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>AURA ‚Äì Medical Price Intelligence</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;background:#000;color:#fff;font-family:Arial}
.top{background:#001a33;color:#00d4ff;padding:12px;font-weight:900;text-align:center}
.container{max-width:900px;margin:auto;padding:20px}
h1{font-size:3.5rem;color:#00d4ff;margin:0}
.btn{padding:15px;border-radius:12px;border:none;font-weight:bold;cursor:pointer;margin:5px}
.pay{background:#00d4ff;color:#000;width:100%}
.card{border:2px solid #00d4ff;border-radius:20px;padding:15px;display:inline-block;width:30%;vertical-align:top}
input{width:100%;padding:15px;border-radius:12px;border:2px solid #00d4ff;background:#000;color:#fff;font-size:1.1rem}
#res{white-space:pre-wrap;background:#050505;padding:20px;border:1px dashed #00d4ff;margin-top:20px;display:none}
.lang{padding:10px;font-weight:bold;border:none;border-radius:10px;cursor:pointer}
</style>
</head>

<body>

<div class="top">
üõ°Ô∏è AURA by May Roga LLC ‚Äî Medical Price Intelligence ‚Ä¢ Not medical or insurance services
</div>

<div class="container">

<h1>AURA</h1>
<p style="color:#ffff00;font-weight:bold">by May Roga LLC</p>

<div id="paywall">
<div class="card"><h3>$5.99</h3><button class="btn pay" onclick="pay('rapido')">Rapid Access</button></div>
<div class="card"><h3>$9.99</h3><button class="btn pay" onclick="pay('standard')">Standard</button></div>
<div class="card"><h3>$19.99</h3><button class="btn pay" onclick="pay('special')">Special</button></div>
<div class="card"><h3>Free</h3><button class="btn pay" onclick="showAdmin()">Admin Access</button></div>
</div>

<div id="admin" style="display:none">
<input id="au" placeholder="Admin user">
<input id="ap" type="password" placeholder="Admin password">
<button class="btn pay" onclick="login()">Enter</button>
</div>

<div id="app" style="display:none">

<p id="geo">üìç Detecting ZIP‚Ä¶</p>

<button class="lang" onclick="setLang('es')">ES</button>
<button class="lang" onclick="setLang('en')">EN</button>
<button class="lang" onclick="setLang('ht')">KREY√íL</button>

<br><br>

<input id="q" placeholder="Procedure, symptom or code (MRI, Crown, D2750)">

<br><br>
<button class="btn pay" onclick="estimate()">Reveal Market Price</button>

<div id="res"></div>

<div style="margin-top:20px">
<button class="btn" onclick="window.print()">üñ® PDF</button>
<button class="btn" onclick="speak()">üîä</button>
<button class="btn" onclick="share()">WhatsApp</button>
</div>

<p style="font-size:0.8rem;color:#888">
Prices may vary by provider, location and complexity. These are estimated market ranges. Aura does not provide medical or insurance services.
</p>

</div>

</div>

<script>
let lang='es'
let zip=null

// ZIP real del navegador
if(navigator.geolocation){
navigator.geolocation.getCurrentPosition(async p=>{
const r=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${p.coords.latitude}&longitude=${p.coords.longitude}&localityLanguage=en`)
const d=await r.json()
zip=d.postcode
document.getElementById('geo').innerText="üìç ZIP "+zip
})
}

if(new URLSearchParams(window.location.search).has('success')){
document.getElementById('paywall').style.display='none'
document.getElementById('app').style.display='block'
}

function setLang(l){
lang=l
document.getElementById('q').placeholder=
l=='es'?'Procedimiento o s√≠ntoma':
l=='en'?'Procedure or symptom':
'Pwosedi oswa sent√≤m'
}

async function estimate(){
const q=document.getElementById('q').value
const fd=new FormData()
fd.append('consulta',q)
fd.append('lang',lang)
if(zip)fd.append('zip_user',zip)

const r=await fetch('/estimado',{method:'POST',body:fd})
const d=await r.json()
document.getElementById('res').style.display='block'
document.getElementById('res').innerText=d.resultado
}

async function pay(p){
if(p=='donacion'){window.location='https://buy.stripe.com/28E00igMD8dR00v5vl7Vm0h';return;}
const fd=new FormData()
fd.append('plan',p)
const r=await fetch('/create-checkout-session',{method:'POST',body:fd})
const d=await r.json()
window.location=d.url
}

function showAdmin(){document.getElementById('admin').style.display='block'}

async function login(){
const fd=new FormData()
fd.append('user',document.getElementById('au').value)
fd.append('pw',document.getElementById('ap').value)
const r=await fetch('/login-admin',{method:'POST',body:fd})
const d=await r.json()
if(d.status=='success'){
document.getElementById('paywall').style.display='none'
document.getElementById('admin').style.display='none'
document.getElementById('app').style.display='block'
}else alert('Invalid')
}

function speak(){
const u=new SpeechSynthesisUtterance(document.getElementById('res').innerText)
u.lang=lang=='es'?'es-US':'en-US'
speechSynthesis.speak(u)
}

function share(){
window.open("https://wa.me/?text="+encodeURIComponent(document.getElementById('res').innerText))
}
</script>

</body>
</html>
