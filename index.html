<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>SmartCargo - Pago de Planes</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f7f7f7; text-align:center; }
        h1 { margin-bottom: 20px; }
        .autopropaganda { margin-bottom: 30px; font-size:18px; }
        .plan-btn { padding:15px 30px; margin:10px; font-size:16px; cursor:pointer; border:none; border-radius:5px; color:#fff; }
        #trial { background-color:#6c757d; }
        #basic { background-color:#0b5cff; }
        #premium { background-color:#28a745; }
        select { margin-bottom:20px; padding:5px; font-size:16px; }
    </style>
</head>
<body>
    <h1 id="title">Bienvenido a SmartCargo</h1>
    <div class="autopropaganda" id="autopropaganda">Protege tu dinero y tu carga 游뚵</div>

    <!-- Selector de idioma -->
    <select id="langSelector">
        <option value="es">Espa침ol</option>
        <option value="en">English</option>
        <option value="ht">Krey쑓 Ayisyen</option>
    </select>

    <div>
        <button class="plan-btn" id="trial">Trial - $0.99 / mes</button>
        <button class="plan-btn" id="basic">Basic - $9.99 / mes</button>
        <button class="plan-btn" id="premium">Premium - $19.99 / mes</button>
    </div>

    <script>
        const BASE_URL = "https://aura-iyxa.onrender.com";
        const priceIds = {
            "TRIAL": "price_1SnYkMBOA5mT4t0P2Ra3NpYy",
            "BASIC": "price_1SnYuABOA5mT4t0Pv706amhC",
            "PREMIUM": "price_1SnZ0eBOA5mT4t0Phwt58d4k"
        };

        // Cambio de idioma
        document.getElementById("langSelector").addEventListener("change", (e) => {
            const lang = e.target.value;
            const title = document.getElementById("title");
            const ad = document.getElementById("autopropaganda");

            if (lang === "es") {
                title.innerText = "Bienvenido a SmartCargo";
                ad.innerText = "Protege tu dinero y tu carga 游뚵";
            } else if (lang === "en") {
                title.innerText = "Welcome to SmartCargo";
                ad.innerText = "Protect your money and cargo 游뚵";
            } else {
                title.innerText = "Byenveni nan SmartCargo";
                ad.innerText = "Pwoteje lajan ou ak chaj ou 游뚵";
            }
        });

        async function checkout(planKey) {
            try {
                const priceId = priceIds[planKey];
                if (!priceId) { alert("Plan inv치lido"); return; }

                const data = new FormData();
                data.append("price_id", priceId);

                const resp = await fetch(`${BASE_URL}/create-checkout-session`, {
                    method: "POST",
                    body: data
                });

                const session = await resp.json();
                if (session.url) {
                    window.location.href = session.url;
                } else {
                    alert("Error al crear sesi칩n de pago.");
                }
            } catch (err) {
                console.error(err);
                alert("Ocurri칩 un error en el pago.");
            }
        }

        document.getElementById("trial").addEventListener("click", () => checkout("TRIAL"));
        document.getElementById("basic").addEventListener("click", () => checkout("BASIC"));
        document.getElementById("premium").addEventListener("click", () => checkout("PREMIUM"));
    </script>
</body>
</html>
